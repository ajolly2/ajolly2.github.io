<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MLB Live Scores (MLB-Only Payload)</title>
  <style>/* same styles as before */</style>
</head>
<body>
  <h1>MLB Live Scores</h1>
  <div id="debug" class="debug"></div>
  <div id="games">Loading…</div>

  <script>
    // Use the MLB-only JSON that your workflow keeps fresh
    const apiUrl = 'https://raw.githubusercontent.com/ajolly2/livesoccertv-scraper/main/data/flash_mlb_payload.json';

    fetch(apiUrl)
      .then(r => {
        if (!r.ok) throw new Error(`${r.status} ${r.statusText}`);
        return r.json();
      })
      .then(games => {
        document.getElementById('debug').textContent = `Found ${games.length} MLB games.`;
        const container = document.getElementById('games');
        container.innerHTML = '';
        if (!games.length) {
          container.textContent = 'No games scheduled for today.';
          return;
        }
        games.forEach(g => {
          const isLive = /In Progress|Top|Bot|\d+(st|nd|rd|th)/.test(g.status);
          const displayTime = isLive
            ? g.status
            : new Date(g.start_time)
                .toLocaleTimeString([], { hour:'2-digit', minute:'2-digit' });
          const row = document.createElement('div');
          row.className = 'game';
          row.innerHTML = `
            <div class="time">${displayTime}</div>
            <div class="teams">${g.away_team} @ ${g.home_team}</div>
            <div class="score">${g.away_score}–${g.home_score}</div>
          `;
          container.appendChild(row);
        });
      })
      .catch(err => {
        document.getElementById('games').innerHTML =
          `<div class="error">Error fetching live data:<br>${err.message}</div>`;
        console.error(err);
      });
  </script>
</body>
</html>
